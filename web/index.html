<!DOCTYPE html>

<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <title>Задание №1</title>
        <style>
        .error { color: red; font-size: 12px; }
        .success { color: green; }
        input { margin: 5px; padding: 8px; }
                .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        

        input:focus {
            outline: none;
            border-color: #667eea;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        input.valid {
            border-color: #10b981;
            background-color: #f0fdf9;
        }
        
        input.invalid {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .error-message {
            color: #ef4444;
            font-size: 12px;
            margin-top: 6px;
            display: none;
        }
        
        .success-message {
            color: #10b981;
            font-size: 12px;
            margin-top: 6px;
            display: none;
        }
    </style>
    </head>
    <body>
        <h1 id="exe1">
            Задание 1
        </h1>
        <ul>
            <li> <a href="http://kubsu.ru/"> абсолютная гиперссыла на главную страницу сайта kubsu.ru </a> </li>
            <li> <a href="https://kubsu.ru/"> абсолютная на главную сайта kubsu.ru в протоколе https </a> </li>
            <li> <a href="th.html"> сокращенная ссылку на внутреннюю страницу </a> </li>
            
        </ul>
        <h2>ссылка-изображение: </h2>
        <a href="th.html">
        <img src="photo.png" alt="Photo" style="width: 600px;" />
        </a>
        <ul>
            <li> <a href="about/th1.html">относительная на страницу в каталоге about</a> </li>
            <li> <a href="#exe1">ссылка на фрагмент текущей страницы</a> </li>
            <li> <a href="index.html?id=exe1">ссылка с параметром id в URL</a> </li>
            <li> <a href="about/about1/th2.html">относительную на страницу в каталоге about/about</a> </li>
            <li><a href="">Обновить страницу</a></li>
            <li><a href="ftp://example.com/">FTP файл</a></li>
        </ul>
        <h4>Тим Бернерс-Ли является автором технологий 
            <a href="https://ru.wikipedia.org/wiki/Всемирная_паутина#.D0.A1.D1.82.D1.80.D1.83.D0.BA.D1.82.D1.83.D1.80.D0.B0_.D0.B8_.D0.BF.D1.80.D0.B8.D0.BD.D1.86.D0.B8.D0.BF.D1.8B"> HTTP </a>
        </h4>
        <h2>Нажмите на квадрат или круг, чтобы перейти на сайт kubsu.ru</h2>
        <img src="photo_2.png" alt="Photo_2" usemap="#Map" />
        <map name="Map">
        <area alt="not_found" shape="rect" coords="22,70,153,190" href="https://kubsu.ru" >
        <area alt="not_found" href="https://kubsu.ru" coords="288,128,68" shape="circle">
        </map>
        <ol>
      <li><a href="https://kubsu.ru" title="kubsu"> kubsu </a></li>
      <li><a href="https://kubsu.ru" title="kubsu"> kubsu </a></li>
        </ol>
        <h2>Форма</h2>
<form id="Form">
    <div>ФИО: <br /><input type="text" id="name" placeholder="Фамилия Имя Отчество">
    <div id="nameError" class="error"></div>

    <div class="form-group">
                <label for="phone">Телефон *</label>
                <input type="tel" id="phone" name="phone" required placeholder="+7 (___) ___-__-__">
                <div class="phone-hint">Формат: +7 (XXX) XXX-XX-XX</div>
                <div class="error-message" id="phoneError">Введите корректный российский номер телефона</div>
                <div class="success-message" id="phoneSuccess">✓ Номер корректен</div>
            </div>
    <div>Почта:<br />
            <input type="email" id="Email" placeholder="Email">
            <div id="emailError" class="error"></div>
        </div>
    <label>Дата рождения: <br /><input type="date" name="birthdate"></label>
    
    <span>Пол:</span>
        <label><input type="radio" name="gender" value="male"> Мужской</label>
        <label><input type="radio" name="gender" value="female"> Женский</label>
    <br>

    <label>Любимый язык программирования: 
        <select name="languages">
            <option value="pascal">Pascal</option>
            <option value="Python">Python</option>
            <option value="C++">C++</option>
            <option value="C">C</option>
            <option value="JavaScript">JavaScript</option>
            <option value="PHP">PHP</option>
            <option value="Java">Java</option>
            <option value="Haskel">Haskel</option>
            <option value="Clojure">Clojure</option>
            <option value="Prolog">Scala</option>
        </select>
    </label><br />

    <label>Биография: <br /><textarea name="bio"></textarea></label><br>
    <div class="checkbox-group" id="checkboxGroup">
                <input type="checkbox" id="agree" name="agree" required>
                <label for="agree" class="checkbox-label">С контрактом ознакомлен(a)
    </label>
            </div>
            <div class="error" id="agreeError">
                Необходимо ваше согласие для продолжения
            </div>
    
    
    
    
    <button type="submit">Сохранить</button>
</form>

     <script>
        const field = document.getElementById('name');
        const error = document.getElementById('nameError');
        

        field.addEventListener('blur', function() {
            validateField(this.value);
        });

        field.addEventListener('input', function() {
            // Сбрасываем ошибку при вводе
            if (this.value.length >= 2) {
                error.textContent = '';
                this.className = 'valid';
            } else {
                this.className = '';
            }
        });
        const nameRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        function validateField(value) {
            let isValid = true;
            if (value.trim() == '') {
                error.textContent = 'Поле не может быть пустым';
                field.className = 'invalid';
                return false;
            } else if (value.length <= 3 || !(/\s/.test(value)) || value !== value.trim()) {
                error.textContent = 'Введите корректное ФИО';
                field.className = 'invalid';
                return false;
            } else {
                error.textContent = '';
                field.className = 'valid';
            }
            

            // Проверка email
            const email = document.getElementById('Email').value;
            const emailError = document.getElementById('emailError');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (email.trim() == '') {
                emailError.textContent = 'Email обязателен для заполнения';
                isValid = false;
            } else if (!emailRegex.test(email)) {
                emailError.textContent = 'Введите корректный email';
                isValid = false;
            } else {
                emailError.textContent = '';
            }

            return isValid;
        }
        
         const form = document.getElementById('Form');
        const phoneInput = document.getElementById('phone');
        const phoneError = document.getElementById('phoneError');
        const phoneSuccess = document.getElementById('phoneSuccess');

        // Функция проверки российского номера
        function validateRussianPhone(phone) {
            const cleanPhone = phone.replace(/\D/g, '');
            
            // Проверка длины
            if (cleanPhone.length !== 11) {
                return false;
            }
            
            // Проверка префикса (7 или 8)
            if (!cleanPhone.startsWith('7') && !cleanPhone.startsWith('8')) {
                return false;
            }
            
            // Проверка кода оператора (вторая цифра не может быть 0,1,2,3)
            if (/[0-3]/.test(cleanPhone[1])) {
                return false;
            }
            
            return true;
        }
        
        const agreeCheckbox = document.getElementById('agree');
        const agreeError = document.getElementById('agreeError');
        const checkboxGroup = document.getElementById('checkboxGroup');
       
        // Функция проверки галочки
        function validateCheckbox() {
            if (!agreeCheckbox.checked) {
                agreeError.style.display = 'block';
                checkboxGroup.classList.add('invalid');
                return false;
            } else {
                agreeError.style.display = 'none';
                checkboxGroup.classList.remove('invalid');
                return true;
            }
        }

        // Проверка при изменении состояния галочки
        agreeCheckbox.addEventListener('change', function() {
            validateCheckbox();
        });
        // Функция форматирования телефона
        function formatPhone(input) {
            let value = input.value.replace(/\D/g, '');
            
            // Заменяем 8 на 7 в начале
            if (value.startsWith('8')) {
                value = '7' + value.substring(1);
            }
            
            let formattedValue = '';
            
            if (value.length > 0) {
                formattedValue = '+7 ';
            }
            if (value.length > 1) {
                formattedValue += '(' + value.substring(1, 4);
            }
            if (value.length > 4) {
                formattedValue += ') ' + value.substring(4, 7);
            }
            if (value.length > 7) {
                formattedValue += '-' + value.substring(7, 9);
            }
            if (value.length > 9) {
                formattedValue += '-' + value.substring(9, 11);
            }
            
            input.value = formattedValue;
        }

        // Функция получения чистого номера
        function getCleanPhone(phone) {
            let clean = phone.replace(/\D/g, '');
            if (clean.startsWith('8')) {
                clean = '7' + clean.substring(1);
            }
            return clean;
        }

        // Обработчик ввода телефона
        phoneInput.addEventListener('input', function() {
            formatPhone(this);
            validatePhoneField();
        });

        // Функция проверки поля телефона
        function validatePhoneField() {
            const value = phoneInput.value;
            
            if (value.trim() == '') {
                phoneError.style.display = 'none';
                phoneSuccess.style.display = 'none';
                phoneInput.classList.remove('valid', 'invalid');
                return false;
            }
            
            if (validateRussianPhone(value)) {
                phoneError.style.display = 'none';
                phoneSuccess.style.display = 'block';
                phoneInput.classList.remove('invalid');
                phoneInput.classList.add('valid');
                return true;
            } else {
                phoneError.style.display = 'block';
                phoneSuccess.style.display = 'none';
                phoneInput.classList.remove('valid');
                phoneInput.classList.add('invalid');
                return false;
            }
        }
        document.getElementById('Form').addEventListener('submit', function(e) {
            e.preventDefault();
            if (validateField(field.value) && validateRussianPhone(phone)) {
                alert('Форма заполнена корректно!');
            }
        });
    </script>
        

    </body>

</html>

